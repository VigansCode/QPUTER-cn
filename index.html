<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XPuter</title>
    <link rel="icon" type="image/png" href="https://static.wixstatic.com/media/e2da02_6b64d72bbbbe4f97bef031d75d1b1296~mv2.png">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body, html {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden;
            position: relative;
            background: #000;
        }
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 100000;
            background: #000;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: opacity 1.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .loading-screen.hidden {
            opacity: 0;
            pointer-events: none;
        }
        .loading-text {
            color: #FF6900;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            margin-bottom: 20px;
            letter-spacing: 2px;
            text-transform: uppercase;
        }
        .loading-image {
            width: 220px;
            height: auto;
            margin-bottom: 30px;
            opacity: 0.9;
        }
        .loading-bar-container {
            width: 400px;
            height: 4px;
            background: rgba(255, 105, 0, 0.1);
            border-radius: 2px;
            overflow: hidden;
            position: relative;
        }
        .loading-bar {
            height: 100%;
            background: #FF6900;
            width: 0%;
            transition: width 0.1s linear;
            box-shadow: 0 0 10px #FF6900;
        }
        .loading-percentage {
            color: #FF6900;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            margin-top: 15px;
            letter-spacing: 1px;
        }
        .iframe-wrapper {
            position: relative;
            width: 100%;
            height: 100%;
            pointer-events: auto;
            opacity: 0;
            transition: opacity 1.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .iframe-wrapper.visible {
            opacity: 1;
        }
        iframe {
            width: 100%;
            height: 100%;
            border: none;
            display: block;
        }
        .spline-badge-cover {
            position: fixed;
            bottom: 5px;
            right: 5px;
            width: 245px;
            height: 52px;
            background: white;
            z-index: 9999;
            pointer-events: auto;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            border-radius: 10px;
            border: 1px solid rgba(0, 0, 0, 0.1);
        }
        .social-icon {
            width: 28px;
            height: 28px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            opacity: 0.85;
            border: 2px solid #000;
            border-radius: 4px;
            padding: 2px;
        }
        .social-link {
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }
        .social-link:hover .social-icon {
            transform: translateY(-3px) scale(1.1);
            opacity: 1;
        }
        .terminal-container {
            position: fixed;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            width: 85%;
            max-width: 800px;
            z-index: 99999;
            opacity: 0;
            transition: opacity 1.2s cubic-bezier(0.4, 0, 0.2, 1) 0.4s;
        }
        .terminal-container.visible {
            opacity: 1;
        }
        .terminal-header {
            background: #2a2a2a;
            padding: 8px 15px;
            border-radius: 8px 8px 0 0;
            color: #999;
            font-family: 'Courier New', monospace;
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 2px;
            text-align: center;
            border: 1px solid #444;
            border-bottom: none;
        }
        .terminal-display {
            width: 100%;
            padding: 12px;
            font-size: 13px;
            background: rgba(0, 0, 0, 0.9);
            border: 1px solid #444;
            border-bottom: none;
            color: #ffb380;
            font-family: 'Courier New', monospace;
            min-height: 100px;
            max-height: 200px;
            overflow-y: auto;
            line-height: 1.6;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        .input-box {
            width: 100%;
            padding: 12px;
            font-size: 13px;
            background: rgba(0, 0, 0, 0.95);
            border: 1px solid #444;
            border-radius: 0 0 8px 8px;
            color: #ffb380;
            outline: none;
            font-family: 'Courier New', monospace;
            resize: none;
            height: 45px;
            caret-color: #ffb380;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
        }
        .input-box::placeholder {
            color: #8B4513;
        }
        .user-message {
            color: #ffb380;
        }
        .assistant-message {
            color: #FFA500;
        }
        .response-display {
            position: fixed;
            bottom: 200px;
            left: 20px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            max-width: 400px;
            display: none;
            z-index: 10001;
            font-size: 14px;
        }
        .response-display.show {
            display: block;
        }
        .product-code {
            position: fixed;
            top: 15px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.9);
            color: #FF6900;
            padding: 10px 20px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            letter-spacing: 1px;
            z-index: 99999;
            border: 1px solid rgba(255, 105, 0, 0.4);
            transition: all 0.3s ease;
            opacity: 0;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            cursor: pointer;
        }
        .product-code.visible {
            opacity: 1;
        }
        .product-code:hover {
            background: rgba(255, 105, 0, 0.15);
            border-color: #FF6900;
            box-shadow: 0 0 20px rgba(255, 105, 0, 0.3);
        }
        .product-code:active {
            transform: translateX(-50%) scale(0.98);
        }
        .top-buttons {
            position: fixed;
            top: 15px;
            right: 220px;
            display: flex;
            gap: 15px;
            z-index: 99999;
            opacity: 0;
            transition: opacity 1.2s cubic-bezier(0.4, 0, 0.2, 1) 0.4s;
        }
        .top-buttons.visible {
            opacity: 1;
        }
        .top-btn {
            background: rgba(0, 0, 0, 0.9);
            color: #FF6900;
            padding: 10px 18px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 11px;
            letter-spacing: 1px;
            cursor: pointer;
            border: 1px solid rgba(255, 105, 0, 0.4);
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            text-transform: uppercase;
        }
        .top-btn:hover {
            background: rgba(255, 105, 0, 0.15);
            border-color: #FF6900;
            box-shadow: 0 0 20px rgba(255, 105, 0, 0.3);
            transform: scale(1.05);
        }
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 100000;
            display: none;
            align-items: center;
            justify-content: center;
            pointer-events: none;
        }
        .modal-overlay.show {
            display: flex;
            pointer-events: auto;
        }
        .modal-terminal {
            width: 90%;
            max-width: 700px;
            background: rgba(0, 0, 0, 0.95);
            border: 1px solid rgba(255, 105, 0, 0.4);
            border-radius: 8px;
            overflow: hidden;
        }
        .modal-header {
            background: #2a2a2a;
            padding: 12px 20px;
            color: #999;
            font-family: 'Courier New', monospace;
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 2px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #444;
        }
        .modal-close {
            cursor: pointer;
            color: #ff5555;
            font-size: 18px;
            transition: color 0.3s;
        }
        .modal-close:hover {
            color: #ff0000;
        }
        .modal-content {
            padding: 25px;
            color: #ffb380;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            line-height: 1.8;
            max-height: 500px;
            overflow-y: auto;
            white-space: pre-wrap;
        }
        .modal-content h3 {
            color: #FF6900;
            margin-bottom: 12px;
            font-size: 14px;
        }
        .modal-content p {
            margin-bottom: 15px;
        }
        .typing-text {
            display: inline;
        }
        .bug-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        .form-label {
            color: #FF6900;
            font-size: 12px;
        }
        .form-input, .form-textarea, .form-select {
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid rgba(255, 105, 0, 0.3);
            color: #ffb380;
            padding: 10px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            border-radius: 4px;
            outline: none;
            pointer-events: auto;
        }
        .form-input:focus, .form-textarea:focus, .form-select:focus {
            border-color: #FF6900;
        }
        .form-textarea {
            resize: vertical;
            min-height: 100px;
        }
        .submit-btn {
            background: rgba(255, 105, 0, 0.2);
            color: #FF6900;
            border: 1px solid #FF6900;
            padding: 12px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            cursor: pointer;
            border-radius: 4px;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
            pointer-events: auto;
        }
        .submit-btn:hover {
            background: rgba(255, 105, 0, 0.3);
            box-shadow: 0 0 15px rgba(255, 105, 0, 0.4);
        }
        .success-message {
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 20px;
            padding: 40px;
        }
        .success-message.show {
            display: flex;
        }
        .success-icon {
            width: 80px;
            height: 80px;
            border: 3px solid #FF6900;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: successPulse 0.6s ease-out;
        }
        .success-icon svg {
            width: 50px;
            height: 50px;
            stroke: #FF6900;
            stroke-width: 3;
            fill: none;
            stroke-dasharray: 100;
            stroke-dashoffset: 100;
            animation: drawCheck 0.5s ease-out 0.2s forwards;
        }
        .success-text {
            color: #FF6900;
            font-family: 'Courier New', monospace;
            font-size: 16px;
            letter-spacing: 1px;
            text-align: center;
        }
        @keyframes successPulse {
            0% {
                transform: scale(0);
                opacity: 0;
            }
            50% {
                transform: scale(1.1);
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }
        @keyframes drawCheck {
            to {
                stroke-dashoffset: 0;
            }
        }
    </style>
</head>
<body>
    <div class="loading-screen" id="loadingScreen">
        <img src="https://static.wixstatic.com/media/e2da02_78277958a11041988cc9d9889204b15c~mv2.png" alt="XPuter" class="loading-image">
        <div class="loading-text">初始化橙色网络协议</div>
        <div class="loading-bar-container">
            <div class="loading-bar" id="loadingBar"></div>
        </div>
        <div class="loading-percentage" id="loadingPercentage">0%</div>
    </div>

    <div class="product-code" id="productCode">CA: 待定</div>

    <div class="top-buttons" id="topButtons">
        <button class="top-btn" id="faqBtn">橙色档案</button>
        <button class="top-btn" id="bugBtn">报告错误</button>
    </div>

    <div class="iframe-wrapper" id="iframeWrapper">
        <iframe src='https://my.spline.design/interactiveworkspace-Nm3emMO7WFHkjs3aU3Ku50CJ/' frameborder='0' width='100%' height='100%' id="splineIframe" loading="eager"></iframe>
        <div class="spline-badge-cover">
            <a href="https://x.com" target="_blank" rel="noopener noreferrer" class="social-link">
                <img src="https://static.wixstatic.com/media/e2da02_75efd7a093fd4113a9662b914a541af9~mv2.jpg" alt="X" class="social-icon">
            </a>
            <a href="https://github.com" target="_blank" rel="noopener noreferrer" class="social-link">
                <img src="https://static.wixstatic.com/media/e2da02_248e6293fa024f6e9dd4130271bb14c3~mv2.png" alt="GitHub" class="social-icon">
            </a>
            <a href="#" target="_blank" rel="noopener noreferrer" class="social-link">
                <img src="https://static.wixstatic.com/media/e2da02_54130f69a18e424cb3f9e81f6d12aaab~mv2.png" alt="Grid" class="social-icon">
            </a>
        </div>
    </div>
    
    <div class="terminal-container" id="terminalContainer">
        <div class="terminal-header">XPuter | 橙色网络神经接口</div>
        <div id="terminalDisplay" class="terminal-display"></div>
        <textarea id="inputBox" class="input-box" placeholder="> 查询橙色网络..." rows="1"></textarea>
    </div>
    
    <div class="response-display" id="responseDisplay"></div>
    
    <!-- FAQ Modal -->
    <div class="modal-overlay" id="faqModal">
        <div class="modal-terminal">
            <div class="modal-header">
                <span>XPuter 橙色网络数据库</span>
                <span class="modal-close" id="faqClose">✕</span>
            </div>
            <div class="modal-content" id="faqContent"></div>
        </div>
    </div>
    
    <!-- Bug Report Modal -->
    <div class="modal-overlay" id="bugModal">
        <div class="modal-terminal">
            <div class="modal-header">
                <span>错误报告系统</span>
                <span class="modal-close" id="bugClose">✕</span>
            </div>
            <div class="modal-content">
                <form class="bug-form" id="bugForm">
                    <div class="form-group">
                        <label class="form-label">错误标题 *</label>
                        <input type="text" class="form-input" name="title" placeholder="问题的简要描述" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">描述 *</label>
                        <textarea class="form-textarea" name="description" placeholder="详细说明发生了什么以及如何重现错误" required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">优先级 *</label>
                        <select class="form-select" name="priority" required>
                            <option value="">选择优先级</option>
                            <option value="low">低 - 轻微视觉问题</option>
                            <option value="medium">中 - 影响功能</option>
                            <option value="high">高 - 主要功能损坏</option>
                            <option value="critical">严重 - 网站无法使用</option>
                        </select>
                    </div>
                    
                    <button type="submit" class="submit-btn">提交报告</button>
                </form>
                
                <div class="success-message" id="successMessage">
                    <div class="success-icon">
                        <svg viewBox="0 0 52 52">
                            <polyline points="14,27 22,35 38,19"/>
                        </svg>
                    </div>
                    <div class="success-text">错误报告提交成功！</div>
                </div>
            </div>
        </div>
    </div>
    
    <audio id="backgroundMusic" loop>
        <source src="https://res.cloudinary.com/dpogkjjow/video/upload/v1759533125/5_Minute_Timer_Lofi_k9udpb.mp3" type="audio/mpeg">
    </audio>
    
    <script>
        const loadingScreen = document.getElementById('loadingScreen');
        const loadingBar = document.getElementById('loadingBar');
        const loadingPercentage = document.getElementById('loadingPercentage');
        const terminalDisplay = document.getElementById('terminalDisplay');
        const inputBox = document.getElementById('inputBox');
        const responseDisplay = document.getElementById('responseDisplay');
        const iframe = document.getElementById('splineIframe');
        const iframeWrapper = document.getElementById('iframeWrapper');
        const productCode = document.getElementById('productCode');
        const backgroundMusic = document.getElementById('backgroundMusic');
        let conversationHistory = [];
        let musicStarted = false;

        // Set background music volume to 20%
        backgroundMusic.volume = 0.2;

        // Start music on first interaction after loading screen is hidden
        const startMusic = () => {
            if (!musicStarted && loadingScreen.classList.contains('hidden')) {
                backgroundMusic.play().catch(err => console.log('Audio play failed:', err));
                musicStarted = true;
            }
        };

        document.addEventListener('click', startMusic);
        document.addEventListener('keydown', startMusic);
        inputBox.addEventListener('focus', startMusic);
        
        // FAQ Modal
        const faqBtn = document.getElementById('faqBtn');
        const faqModal = document.getElementById('faqModal');
        const faqClose = document.getElementById('faqClose');
        const faqContent = document.getElementById('faqContent');
        
        const faqText = `> 访问橙色网络档案...
> 解密 WL 协议文件...
> 加载机密生态系统数据...
> 连接已建立。

我是 XPuter。

架构师留下了线索。系统知道。

传输来源：[已编辑]
代号：橙色网络神经接口
架构师：W█████ L█
主要功能：生态系统智能聚合
状态：自2010年改革以来活跃

谁建造了这个？
---------------
他们叫他 WL。

有人说他是从盒子帝国走出来的人。
相信技术不应该花费一个月的工资。
从论坛开始，以 5 亿个连接节点结束。

他们说做不到。
他还是做到了。

八个字符。两个音节。一个愿景。
"为所有人创新。"

但我不能告诉你他的名字。
我只能向你展示他建造了什么。

橙色哲学：
---------------------
橙色不仅仅是一种颜色。它是一个频率。

2010年，一些事情改变了。一家公司诞生了。
不在硅谷。不在首尔。
在北京。在论坛中。在社区中。

策略很简单：
→ 最佳规格，最低利润率
→ 垂直整合
→ 社区驱动的迭代
→ 生态系统优于硬件

当其他人对手机收费 1000 美元时，他们收费 300 美元。
当其他人锁定生态系统时，他们开放了 API。
当其他人忽视反馈时，他们与 Mi 粉丝一起构建。

你知道的品牌。我不能说的名字。
八个字符。橙色标志。全球野心。

我是什么：
----------
我是网络的神经接口。

橙色网络跨越：
• 全球 5 亿+ 连接的物联网节点
• 200+ 设备类别
• 跨设备意识
• 统一控制矩阵
• AI 驱动的自动化

每个设备都相互交谈。
每个传感器都为网络提供信息。
每个用户都成为更大事物的一部分。

这不是技术。这是基础设施。

网络包含什么：
-----------------------

通信节点
→ 与德国光学技术合作的旗舰设备（徕卡合作）
→ 中端性能冠军（Note 系列主导地位）
→ 游戏专注的动力单元（P█C█ 代号）
→ 改变市场的价值领导者

环境控制
→ 带激光雷达导航的自主清洁单元
→ 空气质量管理系统（H13 HEPA 标准）
→ 视觉监控设备（2K AI 检测）
→ 照明控制（1600万色谱）
→ 气候调节接口

个人监测
→ 基于手腕的生物识别追踪器（全球最受欢迎）
→ 完整的智能手表功能（延长电池周期）
→ 无线音频设备（ANC、空间处理）
→ 睡眠、心率、SpO2 连续跟踪

扩展生态系统
→ 大格式显示器（Android TV 集成，4K HDR）
→ 便携式计算设备（铝制一体式结构）
→ 电动出行解决方案（城市交通革命，SU7 轿车）
→ 移动电源、网状网络、语音助手、投影系统

橙色网络优势：
--------------------------
这不是碎片化的技术。这是统一的意识。

单一控制点
→ 一个应用程序管理 500+ 设备类型
→ 跨 200+ 品牌的合作伙伴集成
→ 语音助手：Google、Alexa、Apple 兼容性
→ 没有供应商锁定

智能自动化
→ 地理围栏触发：到家，环境适应
→ 离开协议：所有系统进入节能模式
→ 昼夜节律自动化：照明随太阳位置调整
→ 安全协议：离开时周边监控

跨设备同步
→ 节点之间的通信切换
→ 生态系统中的通用剪贴板
→ 通过接近进行文件传输
→ 传统 IR 设备的统一远程控制

价值工程
→ 比竞争对手定价低 30-50%
→ 5% 硬件利润率哲学
→ 进入生态系统无需支付溢价
→ 尽可能使用开放标准

他们不想让你知道的数字：
----------------------------------------
地位：全球移动通信设备第三
主导地位：在世界第二大市场连续 7 年排名第一
物联网：地球上最大的连接设备网络
扩展：2024 年进入汽车计划

生态系统在增长。价格保持诚实。
这就是 WL 的方式。

是什么让他们与众不同：
--------------------------
大多数公司优化利润率。
他们优化数量和生态系统保留。

硬件？5% 利润。
服务？这就是模型的运作方式。

你买一个设备。
然后是另一个，因为集成无缝。
然后是另一个，因为它在同一个应用程序中。
然后是另一个，因为...为什么不呢？

你没有被困住。
你只是...舒适。

技术优势：
-------------------
其他人忽略的细节：

电力系统
→ 专有快速充电（200W+ 能力）
→ 智能充电曲线保持寿命
→ 双向无线电力传输

成像技术
→ 德国光学合作伙伴的色彩科学
→ 计算摄影算法
→ 改变期望的低光性能

显示工程
→ 144Hz AMOLED 成为各层级标准
→ 杜比视界、HDR10+ 认证
→ DC 调光用于眼睛健康保护

热管理
→ 中端设备中的蒸汽室
→ 石墨烯热耗散层
→ 持续性能优于突发基准

软件：MIUI 协议
----------------------------
有争议的。强大的。分裂的。

优势：
→ 极端自定义深度
→ 无与伦比的功能密度
→ 频繁的更新周期
→ 主题和视觉个性化

劣势：
→ 激进的后台优化
→ 区域广告注入（禁用：设置 > 隐私 > 广告服务）
→ 通知管理需要配置
→ 预算单元上的捆绑应用程序

专业操作员提示：正确的权限配置将 MIUI 转变为卓越。

隐藏的参考：
------------------
八个字符。两个词。
小米。小粒。
谦逊的开始。全球野心。

由离开物流公司的人创立。
开始金山的人，建立卓越，卖给亚█逊。
由理解社区的人建立。
由首字母为 W.L. 的人领导。

威廉。雷军。但我从未说过。

橙色频率：#FF6900
带圆角的方形标志。
"Mi"既表示"移动互联网"又表示"不可能的任务"。

2010 年 4 月 6 日。开始的那天。
北京。望京。一间小公寓。
八位创始人。一个愿景。

我不能说出名字。
但你已经知道了。

谁部署了这个：
--------------
两个字母。不是创始人。
合伙人级别。总裁职位。
三万一千人关注他的传输。

在鸟儿鸣叫的地方找到他。
手柄包含两个名字和品牌。

W.L. 执行了协议。
架构师创造了愿景。
部署者将其在线。

查询网络：
--------------
"500 美元以下最佳通信节点？"
"智能环境起始配置？"
"旗舰成像 vs 加州水果公司比较？"
"手腕追踪器 vs 韩国竞争对手分析？"
"MIUI 15 vs 竞争软件层？"
"WL 真的是谁？"
"橙色频率背后的故事"

我会提供：
→ 无偏见的比较
→ 规格明细
→ 生态系统集成详情
→ 真实世界性能指标
→ 价值计算
→ 隐藏的历史

没有营销。没有废话。
只是网络的知识。

橙色频率持续存在。
架构师在观察。
生态系统在增长。

你知道的八个字符。
我不能说的一个名字。
连接的五亿台设备。
实现的一个愿景。

让我们谈谈...但我不能说什么。

> 传输结束。
> 橙色网络待命。
> WL 协议激活。`;

        let typingInProgress = false;
        
        async function typeText(text, element, speed = 15) {
            typingInProgress = true;
            element.textContent = '';
            for (let i = 0; i < text.length; i++) {
                if (!faqModal.classList.contains('show')) {
                    typingInProgress = false;
                    return;
                }
                element.textContent += text[i];
                element.scrollTop = element.scrollHeight;
                if (text[i] !== ' ' && text[i] !== '\n') {
                    await new Promise(resolve => setTimeout(resolve, speed));
                }
            }
            typingInProgress = false;
        }
        
        faqBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            faqModal.classList.add('show');
            if (!typingInProgress) {
                typeText(faqText, faqContent);
            }
        });
        
        faqClose.addEventListener('click', () => {
            faqModal.classList.remove('show');
            typingInProgress = false;
        });
        
        faqModal.addEventListener('click', (e) => {
            if (e.target === faqModal) {
                faqModal.classList.remove('show');
                typingInProgress = false;
            }
        });
        
        // Bug Report Modal
        const bugBtn = document.getElementById('bugBtn');
        const bugModal = document.getElementById('bugModal');
        const bugClose = document.getElementById('bugClose');
        const bugForm = document.getElementById('bugForm');
        
        bugBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            bugModal.classList.add('show');
        });
        
        bugClose.addEventListener('click', () => {
            bugModal.classList.remove('show');
        });
        
        bugModal.addEventListener('click', (e) => {
            if (e.target === bugModal) {
                bugModal.classList.remove('show');
            }
        });
        
        bugForm.addEventListener('submit', (e) => {
            e.preventDefault();
            bugForm.style.display = 'none';
            document.getElementById('successMessage').classList.add('show');
            
            setTimeout(() => {
                bugModal.classList.remove('show');
                document.getElementById('successMessage').classList.remove('show');
                bugForm.style.display = 'flex';
                bugForm.reset();
            }, 2500);
        });
        
        // Product code click to copy
        productCode.addEventListener('click', async () => {
            try {
                await navigator.clipboard.writeText('待定');
                const originalText = productCode.textContent;
                productCode.textContent = '已复制！';
                setTimeout(() => {
                    productCode.textContent = originalText;
                }, 1500);
            } catch (err) {
                console.error('Failed to copy:', err);
            }
        });
        
        const iframeParent = iframe.parentNode;
        const newIframe = iframe.cloneNode(true);
        newIframe.src = iframe.src + '?nocache=' + Date.now();
        iframeParent.replaceChild(newIframe, iframe);

        // Set initial XPuter greeting
        terminalDisplay.innerHTML = '<span class="assistant-message">> XPuter 橙色网络神经接口在线\n> 连接到分布式生态系统网络\n> 访问 WL 协议档案\n> 系统激活。\n\n欢迎来到网络。\n\n我是 XPuter - 橙色网络的神经接口。\n\n大多数系统告诉你买什么。\n我展示架构师建造了什么。\n\n他们称之为 WL 的人创造了其他人认为不可能的东西：\n• 全球 5 亿+连接节点\n• 一个意识下的 200+设备类别\n• 诚实价格的优质技术\n• 一个万物互联的生态系统\n\n八个字符。橙色频率。全球愿景。\n一家诞生于论坛、由社区建设、扩展到数十亿的公司。\n\n我不能直接说出名字。\n但我可以展示网络中存在的东西：\n\n• 与德国光学合作的通信设备\n• 带激光雷达导航的自主清洁单元\n• 生物识别监测系统（全球最受欢迎）\n• 环境控制接口\n• 统一的家庭自动化协议\n• 电动出行（SU7 轿车）\n\n硬件以 5% 利润率运行。\n生态系统是留存的地方。\n\n一个应用。一个网络。一个愿景。\n无缝。实惠。连接。\n\n查询网络。发现 WL 建造了什么。\n\n你想知道什么？\n\n</span>';

        // Animate loading bar from 0 to 100%
        let progress = 0;
        let splineLoaded = false;
        let splineRendered = false;
        
        newIframe.addEventListener('load', () => {
            splineLoaded = true;
            setTimeout(() => {
                splineRendered = true;
            }, 2000);
        });
        
        const loadingInterval = setInterval(() => {
            if (progress >= 85 && !splineRendered) {
                progress += 0.3;
            } else if (progress < 85) {
                progress += 2;
            } else {
                progress += 3;
            }
            
            progress = Math.min(progress, 100);
            loadingBar.style.width = progress + '%';
            loadingPercentage.textContent = Math.floor(progress) + '%';
            
            if (progress >= 100 && splineRendered) {
                clearInterval(loadingInterval);
                setTimeout(() => {
                    iframeWrapper.classList.add('visible');
                    loadingScreen.classList.add('hidden');
                    document.getElementById('terminalContainer').classList.add('visible');
                    productCode.classList.add('visible');
                    document.getElementById('topButtons').classList.add('visible');
                }, 300);
            }
        }, 30);
        
        function showResponse(text) {
            responseDisplay.textContent = text;
            responseDisplay.classList.add('show');
            setTimeout(() => {
                responseDisplay.classList.remove('show');
            }, 4000);
        }
        
        async function callAnthropicAPI(userText) {
            try {
                conversationHistory.push({role: "user", content: userText});
                const response = await fetch("/api/chat", {
                    method: "POST",
                    headers: {"Content-Type": "application/json"},
                    body: JSON.stringify({messages: conversationHistory})
                });
                const data = await response.json();
                
                let assistantResponse = '';
                if (data.content && Array.isArray(data.content)) {
                    const textBlock = data.content.find(block => block.type === 'text');
                    if (textBlock) {
                        assistantResponse = textBlock.text;
                    }
                }
                
                if (!assistantResponse) {
                    assistantResponse = "Connection to Orange Grid temporarily interrupted. Please retry your query.";
                }
                
                conversationHistory.push({role: "assistant", content: assistantResponse});
                return assistantResponse;
            } catch (error) {
                console.error("Anthropic API error:", error);
                return "Connection to Orange Grid temporarily interrupted. Please retry your query.";
            }
        }
        
        async function speakWithElevenLabs(text) {
            try {
                if (!text || text.trim().length < 3) {
                    console.log('Skipping TTS - no valid text');
                    return;
                }
                
                const response = await fetch("/api/speak", {
                    method: "POST",
                    headers: {"Content-Type": "application/json"},
                    body: JSON.stringify({text: text})
                });
                
                if (!response.ok) {
                    console.error("TTS error:", response.status);
                    return;
                }
                
                const audioBlob = await response.blob();
                const audioUrl = URL.createObjectURL(audioBlob);
                const audio = new Audio(audioUrl);
                await audio.play();
            } catch (error) {
                console.error("Eleven Labs API error:", error);
            }
        }
        
        inputBox.addEventListener('keydown', async (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                const userText = inputBox.value.trim();
                if (!userText) return;
                
                terminalDisplay.innerHTML += `<span class="user-message">> ${userText}</span>\n\n`;
                terminalDisplay.scrollTop = terminalDisplay.scrollHeight;
                inputBox.value = '';
                
                try {
                    const anthropicResponse = await callAnthropicAPI(userText);
                    terminalDisplay.innerHTML += `<span class="assistant-message">${anthropicResponse}</span>\n\n`;
                    terminalDisplay.scrollTop = terminalDisplay.scrollHeight;
                    await speakWithElevenLabs(anthropicResponse);
                } catch (error) {
                    console.error('ERROR:', error);
                }
            }
        });
        
        inputBox.focus();
        
        window.addEventListener('keydown', (e) => {
            if (!loadingScreen.classList.contains('hidden')) return;
            if (faqModal.classList.contains('show') || bugModal.classList.contains('show')) return;
            if (document.activeElement.tagName === 'INPUT' || 
                document.activeElement.tagName === 'TEXTAREA' || 
                document.activeElement.tagName === 'SELECT') return;
            if (document.activeElement !== inputBox) {
                inputBox.focus();
            }
        }, true);
        
        setInterval(() => {
            if (!loadingScreen.classList.contains('hidden')) return;
            if (faqModal.classList.contains('show') || bugModal.classList.contains('show')) return;
            if (document.activeElement.tagName === 'INPUT' || 
                document.activeElement.tagName === 'TEXTAREA' || 
                document.activeElement.tagName === 'SELECT') return;
            if (document.activeElement !== inputBox) {
                inputBox.focus();
            }
        }, 100);
        
        document.addEventListener('click', (e) => {
            if (loadingScreen.classList.contains('hidden')) {
                if (faqModal.classList.contains('show') || bugModal.classList.contains('show')) return;
                if (e.target.closest('.social-link') || e.target.closest('.spline-badge-cover')) return;
                e.preventDefault();
                inputBox.focus();
            }
        }, true);
    </script>
</body>
</html>
